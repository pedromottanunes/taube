<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gerar Orçamento • OD Drive</title>

  <!-- Tailwind CDN (prototipagem) -->
  <script src="https://cdn.tailwindcss.com?min"></script>
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <style>
    :root {
      --od-primary: #0f766e;
      --od-primary-light: #14b8a6;
      --od-secondary: #0891b2;
    }

    /* Utilidades visuais */
    .bg-gradient-primary {
      background: linear-gradient(135deg, var(--od-primary) 0%, var(--od-primary-light) 100%);
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--od-primary) 0%, var(--od-primary-light) 100%);
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(15, 118, 110, 0.3);
    }
    .card-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .input-focus {
      transition: all 0.3s ease;
    }
    .input-focus:focus {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(15, 118, 110, 0.15);
    }
    .upload-area {
      transition: all 0.3s ease;
      border: 2px dashed #d1d5db;
    }
    .upload-area:hover {
      border-color: var(--od-primary);
      background: rgba(15, 118, 110, 0.05);
    }
    .upload-area.dragover {
      border-color: var(--od-primary-light);
      background: rgba(20, 184, 166, 0.1);
      transform: scale(1.02);
    }
  </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-teal-50 px-4 py-8">
  <!-- Padrão de fundo -->
  <div class="fixed inset-0 opacity-5">
    <div
      class="absolute inset-0"
      style="background-image: radial-gradient(circle at 25% 25%, var(--od-primary) 2px, transparent 2px); background-size: 50px 50px;"
    ></div>
  </div>

  <div class="relative max-w-2xl mx-auto">
    <!-- Cabeçalho -->
    <div class="text-center mb-8">
      <h1
        class="flex items-center justify-center text-4xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent gap-3"
      >
        <img
          src="https://www.dropbox.com/scl/fi/1lcom3fqzeltyx32h1jya/logood.png?rlkey=1pk6lohumczfbgpk4033vglhu&st=xuv4ltyc&dl=1"
          alt="Logo"
          class="w-18 h-12 mr-2"
        />
      </h1>
      <div class="w-24 h-1 bg-gradient-primary rounded-full mx-auto mt-4"></div>
    </div>

    <!-- Cartão principal -->
    <div class="card-container rounded-3xl shadow-2xl p-8">
      <form id="odForm" class="space-y-8">
        <!-- Informações da empresa -->
        <div class="space-y-6">
          <h2 class="text-xl font-semibold text-gray-800 flex items-center gap-2">
            <i data-lucide="building-2" class="w-5 h-5 text-teal-600"></i>
            Informações da Empresa
          </h2>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <input
              id="company_name"
              name="company_name"
              required
              placeholder="Nome da empresa"
              class="w-full h-14 rounded-xl border-2 border-gray-200 input-focus focus:border-teal-500 text-gray-800 font-medium"
            />
            <input
              id="site_url"
              name="site_url"
              type="url"
              required
              placeholder="https://exemplo.com"
              class="w-full h-14 rounded-xl border-2 border-gray-200 input-focus focus:border-teal-500 text-gray-800"
            />
            <input
              id="city"
              name="city"
              required
              placeholder="Cidade"
              class="w-full h-14 rounded-xl border-2 border-gray-200 input-focus focus:border-teal-500 text-gray-800"
            />
          </div>
        </div>

        <!-- Detalhes do projeto -->
        <div class="space-y-6">
          <h2 class="text-xl font-semibold text-gray-800 flex items-center gap-2">
            <i data-lucide="settings" class="w-5 h-5 text-teal-600"></i>
            Detalhes do Projeto
          </h2>

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
            <input
              id="cars_qtd"
              name="cars_qtd"
              type="number"
              min="1"
              required
              placeholder="Quantidade de carros"
              class="w-full h-14 rounded-xl border-2 border-gray-200 input-focus focus:border-teal-500 text-gray-800"
            />
            <input
              id="discount"
              name="discount"
              type="number"
              step="0.01"
              value="0"
              placeholder="Desconto (R$)"
              class="w-full h-14 rounded-xl border-2 border-gray-200 input-focus focus:border-teal-500 text-gray-800"
            />
          </div>

          <!-- Seleção de produtos -->
          <h3 class="text-lg font-semibold text-gray-700 flex items-center gap-2 mt-2">
            <i data-lucide="shopping-bag" class="w-5 h-5 text-teal-600"></i>
            Seleção de Produtos
          </h3>

          <div id="product_wrapper" class="space-y-4"><!-- select(s) dinâmicos --></div>

          <div class="flex gap-4">
            <button
              type="button"
              id="addProduct"
              class="flex items-center gap-2 text-teal-700 font-medium hover:text-teal-900 transition"
            >
              <i data-lucide="plus-circle" class="w-5 h-5"></i>
              Adicionar produto
            </button>
          </div>
        </div>

        <!-- Upload da imagem -->
        <div class="space-y-6">
          <h2 class="text-xl font-semibold text-gray-800 flex items-center gap-2">
            <i data-lucide="upload" class="w-5 h-5 text-teal-600"></i>
            Imagem de referência
          </h2>

          <div id="uploadArea" class="upload-area rounded-xl p-2 text-center cursor-pointer">
            <input
              id="mockup_image"
              name="mockup_image"
              type="file"
              accept="image/png,image/jpeg"
              required
              class="hidden"
            />

            <!-- Conteúdo padrão -->
            <div class="upload-content">
              <div
                class="inline-flex items-center justify-center w-6 h-6 bg-gray-100 rounded-full mb-4"
              >
                <i data-lucide="image" class="w-4 h-4 text-gray-400"></i>
              </div>
              <p class="text-lg font-medium text-gray-700 mb-2">
                Clique para enviar ou arraste aqui
              </p>
              <p class="text-sm text-gray-500">PNG ou JPG até 10 MB</p>
            </div>

            <!-- Pré-visualização de arquivo -->
            <div class="file-preview hidden">
              <div
                class="inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4"
              >
                <i data-lucide="check" class="w-8 h-8 text-green-600"></i>
              </div>
              <p class="text-lg font-medium text-green-700 mb-2">Arquivo selecionado</p>
              <p class="text-sm text-gray-600 file-name"></p>
            </div>
          </div>
        </div>

        <!-- Botão enviar -->
        <button
          type="submit"
          class="w-full h-16 btn-primary text-white font-bold text-lg rounded-xl shadow-lg flex items-center justify-center gap-3"
        >
          <i data-lucide="send" class="w-6 h-6"></i>
          Gerar Orçamento
        </button>

        <div id="msg" class="text-center text-sm mt-4 hidden"></div>
      </form>
    </div>

    <!-- Rodapé -->
    <div class="text-center mt-8 text-gray-500 text-sm">
      <p>© 2024 OD Drive. Todos os direitos reservados.</p>
    </div>
  </div>

  <script>
    /* Inicializa ícones */
    lucide.createIcons();

    /* -------------------- Selecção dinâmica de produtos -------------------- */
    const productWrapper = document.getElementById("product_wrapper");
    const addProductBtn  = document.getElementById("addProduct");
    let productCount = 0;

    function createProductSelect() {
      productCount++;

      // Container do select + botão remover
      const container = document.createElement("div");
      container.className = "flex gap-2 items-center";
